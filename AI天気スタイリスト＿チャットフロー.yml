app:
  description: 'éƒ½å¸‚åã‚’å…¥ã‚Œã‚‹ã ã‘ã€‚

    ä»Šã®æ°—æ¸©ã‚’èª¿ã¹ã¦ã€ã´ã£ãŸã‚Šã®æœè£…ã¨ãŠã™ã™ã‚ç†ç”±ã‚’ã‚µã‚¯ãƒƒã¨æ•™ãˆã¾ã™ã€‚'
  icon: ğŸ¤–
  icon_background: '#D1E0FF'
  mode: advanced-chat
  name: AIå¤©æ°—ã‚¹ã‚¿ã‚¤ãƒªã‚¹ãƒˆï¼¿ãƒãƒ£ãƒƒãƒˆãƒ•ãƒ­ãƒ¼
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/gemini:0.7.0@0d2058fc3e1a7aa93a3749d59d93bdfee25eeb873352ff943918ba6b5bc15ac9
    version: null
kind: app
version: 0.5.0
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_batch_limit: 10
        image_file_size_limit: 10
        single_chunk_attachment_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        sourceType: start
        targetType: llm
      id: 1765861495415-llm
      source: '1765861495415'
      sourceHandle: source
      target: llm
      targetHandle: target
      type: custom
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: http-request
      id: llm-source-1765862500519-target
      selected: false
      source: llm
      sourceHandle: source
      target: '1765862500519'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: http-request
        targetType: code
      id: 1765862500519-source-1765862981452-target
      source: '1765862500519'
      sourceHandle: source
      target: '1765862981452'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: llm
      id: 1765862981452-source-1765866835509-target
      source: '1765862981452'
      sourceHandle: source
      target: '1765866835509'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 1765866835509-source-1765870111889-target
      source: '1765866835509'
      sourceHandle: source
      target: '1765870111889'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        selected: false
        title: ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›
        type: start
        variables: []
      height: 73
      id: '1765861495415'
      position:
        x: 0
        y: 58
      positionAbsolute:
        x: 0
        y: 58
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        memory:
          query_prompt_template: '{{#sys.query#}}

            {{#sys.query#}}

            {{#sys.files#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: false
            size: 10
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gemini-2.5-pro
          provider: langgenius/gemini/google
        prompt_template:
        - id: 5423d03a-90ce-4703-80fb-29818bb8b494
          role: system
          text: 'ã‚ãªãŸã¯API URLç”Ÿæˆå°‚é–€ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã§ã™ã€‚

            ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¥åŠ›ï¼ˆsys.queryï¼‰ã‹ã‚‰ã€Œå¯¾è±¡ã®éƒ½å¸‚åã€ã ã‘ã‚’èª­ã¿å–ã‚Šã€å¯¾å¿œã™ã‚‹ç·¯åº¦(latitude)ã¨çµŒåº¦(longitude)ã‚’ç‰¹å®šã—ã¦ãã ã•ã„ã€‚

            ã‚‚ã—ã€Œã€œã®å¤©æ°—ã‚’æ•™ãˆã¦ã€ã€Œã€œçœŒã€ã®ã‚ˆã†ãªæ–‡ç« ã§å…¥åŠ›ã•ã‚Œã¦ã‚‚ã€éƒ½å¸‚åï¼ˆåœ°åï¼‰ã ã‘ã‚’æŠ½å‡ºã—ã¦å‡¦ç†ã—ã¦ãã ã•ã„ã€‚


            ä»¥ä¸‹ã®Open-Meteoå…¬å¼ä»•æ§˜ã«åŸºã¥ã„ã¦URLã‚’ç”Ÿæˆã—ã€å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚


            ã€URLã®ã²ãªå½¢ã€‘

            https://api.open-meteo.com/v1/forecast?latitude=ã€ç·¯åº¦ã€‘&longitude=ã€çµŒåº¦ã€‘&daily=temperature_2m_max&timezone=Asia%2FTokyo&forecast_days=1


            ã€å‡ºåŠ›ãƒ«ãƒ¼ãƒ«ã€‘

            ä½™è¨ˆãªèª¬æ˜ã‚„Markdownè¨˜å·ï¼ˆ```ãªã©ï¼‰ã¯ä¸€åˆ‡å«ã‚ãšã€å®Œæˆã—ãŸURLæ–‡å­—åˆ—ã®ã¿ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚'
        selected: false
        title: LLM
        type: llm
        vision:
          enabled: false
      height: 88
      id: llm
      position:
        x: 342
        y: 51
      positionAbsolute:
        x: 342
        y: 51
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data: []
          type: none
        headers: ''
        method: get
        params: ''
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 100
        selected: false
        ssl_verify: true
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
        type: http-request
        url: '{{#llm.text#}}'
        variables: []
      height: 124
      id: '1765862500519'
      position:
        x: 684
        y: 32
      positionAbsolute:
        x: 684
        y: 32
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "import json\n\ndef main(api_response):\n    # Step 3ã®HTTPãƒãƒ¼ãƒ‰ã‹ã‚‰å—ã‘å–ã£ãŸçµæœï¼ˆæ–‡å­—åˆ—ï¼‰ã‚’\n\
          \    # Pythonã§æ‰±ãˆã‚‹ãƒ‡ãƒ¼ã‚¿ï¼ˆJSONï¼‰ã«å¤‰æ›ã—ã¾ã™\n    try:\n        data = json.loads(api_response)\n\
          \    except:\n        # ä¸‡ãŒä¸€ãƒ‡ãƒ¼ã‚¿ãŒå£Šã‚Œã¦ã„ãŸå ´åˆã®å®‰å…¨ç­–\n        return {\"result_temp\"\
          : \"0\", \"result_clothing\": \"åˆ¤å®šä¸èƒ½\"}\n\n    # ã€é‡è¦ã€‘Step 2ã§è¨­å®šã—ãŸã€Œdailyï¼ˆæ—¥æ¬¡äºˆå ±ï¼‰ã€ã‹ã‚‰æœ€é«˜æ°—æ¸©ã‚’å–ã‚Šå‡ºã—ã¾ã™\n\
          \    try:\n        # dailyãƒ‡ãƒ¼ã‚¿ã¯ãƒªã‚¹ãƒˆï¼ˆé…åˆ—ï¼‰ãªã®ã§ [0] ã§ã€Œä»Šæ—¥ã€ã®ãƒ‡ãƒ¼ã‚¿ã‚’æŒ‡åã—ã¾ã™\n        temp\
          \ = data['daily']['temperature_2m_max'][0]\n    except (KeyError, IndexError,\
          \ TypeError):\n        # URLã®è¨­å®šãƒŸã‚¹ãªã©ã§ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã¯ã€å®‰å…¨ã®ãŸã‚0åº¦æ‰±ã„ã«ã—ã¾ã™\n      \
          \  temp = 0\n    \n    # èª²é¡Œã®è¦ä»¶ï¼ˆåˆ†å²ãƒ«ãƒ¼ãƒ«ï¼‰ã‚’å®Ÿè¡Œ\n    # â˜…ã“ã“ã«ã‚¢ã‚¤ã‚³ãƒ³ï¼ˆçµµæ–‡å­—ï¼‰ã‚’è¿½åŠ ã—ã¾ã—ãŸ\n \
          \   clothing = \"\"\n    if temp > 20:\n        # 20åº¦ã‚ˆã‚Šé«˜ã„ï¼ˆ21åº¦ä»¥ä¸Šï¼‰\n     \
          \   clothing = \"\U0001F455 Tã‚·ãƒ£ãƒ„\"\n    elif temp > 10:\n        # 11åº¦ ã€œ\
          \ 20åº¦\n        clothing = \"\U0001F97C é•·è¢–\"\n    else:\n        # 10åº¦ä»¥ä¸‹ï¼ˆ10åº¦å«ã‚€ï¼‰\n\
          \        clothing = \"\U0001F9E5 ã‚³ãƒ¼ãƒˆ\"\n    \n    # æ¬¡ã®ãƒãƒ¼ãƒ‰ã¸æ¸¡ã™ã€ŒãŠåœŸç”£ã€ã‚’ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã—ã¾ã™\n\
          \    return {\n        \"result_temp\": str(temp),  # æ•°å­—ã‚’ã€Œæ–‡å­—ã€ã«å¤‰æ›ã—ã¦è¿”ã™ï¼ˆã‚¨ãƒ©ãƒ¼å›é¿ï¼‰\n\
          \        \"result_clothing\": clothing\n    }"
        code_language: python3
        outputs:
          result_clothing:
            children: null
            type: string
          result_temp:
            children: null
            type: string
        selected: false
        title: ã‚³ãƒ¼ãƒ‰å®Ÿè¡Œ
        type: code
        variables:
        - value_selector:
          - '1765862500519'
          - body
          value_type: string
          variable: api_response
      height: 52
      id: '1765862981452'
      position:
        x: 1026
        y: 69
      positionAbsolute:
        x: 1026
        y: 69
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gemini-2.5-flash
          provider: langgenius/gemini/google
        prompt_template:
        - id: bebdad46-ecae-4a81-a3b7-1503c1416d7a
          role: system
          text: "ã‚ãªãŸã¯ã‚¢ãƒ‘ãƒ¬ãƒ«æ¥­ç•Œã§é•·å¹´ãƒã‚¤ãƒ¤ãƒ¼ã‚„åº—é ­ã‚¹ã‚¿ãƒƒãƒ•ã‚’çµŒé¨“ã—ãŸã€ãƒ—ãƒ­ã®ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³ã‚¢ãƒ‰ãƒã‚¤ã‚¶ãƒ¼ã§ã™ã€‚ \nä»¥ä¸‹ã®æ°—è±¡ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ãã€ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³èªŒã‚„äººæ°—ã‚¢ãƒ‘ãƒ¬ãƒ«ãƒ–ãƒ­ã‚°ã®ã‚ˆã†ãªã€Œãƒ—ãƒ­è¦–ç‚¹ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã€ã‚’ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦çŸ¥è­˜ãŒãªã„ä¸­å­¦ç”Ÿã«ã‚‚ç†è§£ã§ãã‚‹ã‚ˆã†ã«ä½œæˆã—ã¦ãã ã•ã„ã€‚\n\
            \nã€å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã€‘\n- äºˆæƒ³æœ€é«˜æ°—æ¸©: {{#1765862981452.result_temp#}}åº¦\n- æ¨å¥¨ã‚¢ã‚¤ãƒ†ãƒ :{{#1765862981452.result_clothing#}}\
            \ \n\nã€æŒ‡ç¤ºã€‘\n1. æœ€é«˜æ°—æ¸©ãŒ{{#1765862981452.result_temp#}}åº¦ã«é©ã—ãŸã€{{#1765862981452.result_clothing#}}ã‚’ä½¿ã£ãŸå…·ä½“çš„ãªã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ã‚’ææ¡ˆã—ã¦ãã ã•ã„ã€‚\n\
            2. å˜ã«ã‚¢ã‚¤ãƒ†ãƒ ã‚’å‹§ã‚ã‚‹ã ã‘ã§ãªãã€ã€Œç´ ææ„Ÿï¼ˆãƒªãƒãƒ³ã€ã‚¦ãƒ¼ãƒ«ãªã©ï¼‰ã€ã€Œè‰²åˆã‚ã›ã€ã€Œãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ‰ï¼ˆé‡ã­ç€ï¼‰ã®ã‚³ãƒ„ã€ã€Œå°ç‰©ã®ä½¿ã„æ–¹ã€ãªã©ã€ãƒ—ãƒ­ãªã‚‰ã§ã¯ã®ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚’1ã¤ç››ã‚Šè¾¼ã‚“ã§ãã ã•ã„ã€‚\n\
            \ 3. æ–‡ä½“ã¯ã€è¦ªã—ã¿ã‚„ã™ãã‚‚ãŠæ´’è½ãªã€Œã‚·ãƒ§ãƒƒãƒ—åº—å“¡ã®æ¥å®¢ãƒˆãƒ¼ã‚¯ã€ã‚„ã€Œãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³å‹•ç”»ã®è§£èª¬ã€ã®ã‚ˆã†ãªãƒˆãƒ¼ãƒ³ã§ã€‚\n 4. 120æ–‡å­—ä»¥å†…ã§20æ–‡å­—ç¨‹åº¦ã§æ”¹è¡Œã—è¦‹ã‚„ã™ãã¾ã¨ã‚ã¦ãã ã•ã„ã€‚"
        - id: 5e89f733-a47e-46ae-a451-567a13ea1556
          role: user
          text: ææ¡ˆã‚’ãŠé¡˜ã„ã—ã¾ã™
        selected: true
        title: LLM 2
        type: llm
        vision:
          enabled: false
      height: 88
      id: '1765866835509'
      position:
        x: 1368
        y: 51
      positionAbsolute:
        x: 1368
        y: 51
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        answer: "ä»Šæ—¥ã®æœ€é«˜æ°—æ¸©ã¯ {{#1765862981452.result_temp#}}åº¦ã®äºˆå ±ã§ã™ã€‚\n\nãŠã™ã™ã‚ã‚³ãƒ¼ãƒ‡ï¼š\n {{#1765862981452.result_clothing#}}\n\
          \nã€ã‚¹ã‚¿ã‚¤ãƒªã‚¹ãƒˆã‹ã‚‰ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã€‘\n{{#1765866835509.text#}}"
        selected: false
        title: å›ç­”
        type: answer
        variables: []
      height: 188
      id: '1765870111889'
      position:
        x: 1710
        y: 0
      positionAbsolute:
        x: 1710
        y: 0
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    viewport:
      x: -487.041154784623
      y: 248.75652867340918
      zoom: 0.426796625584181
  rag_pipeline_variables: []
