å¤©æ°—é€£å‹•å‹æœè£…æ¨è–¦ãƒœãƒƒãƒˆ åˆ¶ä½œãƒãƒ‹ãƒ¥ã‚¢ãƒ«

Step 4ï¼šã‚³ãƒ¼ãƒ‰å®Ÿè¡Œãƒãƒ¼ãƒ‰ï¼ˆåˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ï¼‰
Pythonã‚’ä½¿ã£ã¦ã€ã€Œæ°—æ¸©ãƒ‡ãƒ¼ã‚¿ã®æŠ½å‡ºã€ã¨ã€Œã‚¢ã‚¤ã‚³ãƒ³ä»˜ãã®æœè£…åˆ†å²ã€ã‚’ä¸€æ‹¬ã§è¡Œã„ã¾ã™ã€‚

å…¥åŠ›å¤‰æ•°: api_response ï¼ˆå€¤: HTTP > bodyï¼‰

å‡ºåŠ›å¤‰æ•°:
    1. result_temp (String)
    2. result_clothing (String)

Pythonã‚³ãƒ¼ãƒ‰:
import json

def main(api_response):
    try:
        data = json.loads(api_response)
    except:
        return {"result_temp": "0", "result_clothing": "åˆ¤å®šä¸èƒ½"}

    try:
        # ä»Šæ—¥ã®æœ€é«˜æ°—æ¸©ã‚’å–å¾—
        temp = data['daily']['temperature_2m_max'][0]
    except (KeyError, IndexError, TypeError):
        temp = 0

    # ã‚¢ã‚¤ã‚³ãƒ³ä»˜ãã§åˆ†å²
    clothing = ""
    if temp > 20:
        clothing = "ğŸ‘• Tã‚·ãƒ£ãƒ„"
    elif temp > 10:
        clothing = "ğŸ¥¼ é•·è¢–"
    else:
        clothing = "ğŸ§¥ ã‚³ãƒ¼ãƒˆ"

    # æ–‡å­—åˆ—ã«ã—ã¦è¿”ã™
    return {
        "result_temp": str(temp),
        "result_clothing": clothing
    }